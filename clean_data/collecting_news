import requests

# PENDING: CREATE FUNCTION THAT TAKES FILTER PARAMETERS TO CREATE URL FOR REQUEST

def create_url(tags, begin_data = 20180101, end_date = 20230201, page = 0):
    """
    Create request url for API based on query search parameters passed to the
        function
    
    Inputs:
        tags (lst): list of tags to look for. The tags to filter for are looked
            in the body, headline and byline of the articles.
        begin_data (int): 8 digits (YYYYMMDD) that specify the begin date or from
            when to start looking for articles
        end_date (int): 8 digits (YYYYMMDD) that specify the end date or until
            when to stop looking for articles
        page (int): 
    """

url = "https://api.nytimes.com/svc/search/v2/articlesearch.json?fq=('blm' OR 'black lives matter')&begin_date=20180101&end_date=20230208&page=0&api-key=4AA7GDZ7giaN7m3rh8ULH5A60EWNlJHB"

# PENDING: CREATE MAKE REQUEST FUNCTION THAT LIMITS NUMBER OF REQUESTS YOU CAN
# MAKE IN CERTAIN TIME (1 request every 6 seconds)

# Make first request to get max number of pages we can query
resp = requests.get(url)

# Convert response to json format with .json method from Response class
json = resp.json()

# Get number of stories that match our query search parameters
hits = json["response"]["meta"]["hits"]

# Get maximum number of pages we can query
max_pages = int(hits / 10)

# Query everything and save the jsons
# for page in range(max_pages + 1):